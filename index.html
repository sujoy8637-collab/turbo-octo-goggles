<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>This Rose — Sujoy</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#030316;
    --text:#f5f9ff;
    --muted: rgba(210,220,235,0.78);
    --gold-1:#ffd27a;
    --gold-2:#f7b500;
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
  html,body{height:100%;margin:0;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#020114,#04010a);color:var(--text);display:flex;align-items:center;justify-content:center;padding:12px;}
  .frame{ width:min(940px,96vw); height:min(880px,94vh); position:relative; border-radius:16px; overflow:hidden; background:linear-gradient(180deg, rgba(6,8,18,0.55), rgba(2,3,8,0.78)); box-shadow: 0 30px 90px rgba(0,0,0,0.55); touch-action: manipulation; }

  /* Screens */
  .screen{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; padding:42px; transition: opacity .62s cubic-bezier(.2,.9,.2,1), transform .62s ease; opacity:0; pointer-events:none; transform: translateY(12px); }
  .screen.active{ opacity:1; pointer-events:auto; transform: translateY(0); }
  .panel{ max-width:820px; margin:0 auto; }
  .title{ font-size:clamp(20px,3.2vw,36px); font-weight:600; line-height:1.22; text-shadow:0 8px 26px rgba(0,0,0,0.55); }
  .subtitle{ margin-top:12px; color:var(--muted); font-size:clamp(13px,2vw,16px); opacity:0.95; }

  /* Moon visuals */
  .moon-halo{ position:absolute; left:50%; top:6%; transform:translateX(-50%); width:980px; height:980px; border-radius:50%;
    background: radial-gradient(circle at 50% 40%, rgba(180,200,255,0.24), rgba(150,170,220,0.08) 40%, transparent 60%);
    filter: blur(72px); mix-blend-mode:screen; z-index:1; opacity:0.98; animation: haloPulse 9s ease-in-out infinite; pointer-events:none;
  }
  @keyframes haloPulse{ 0%{opacity:0.92}50%{opacity:1}100%{opacity:0.92} }

  .moon-wrap{ position:absolute; left:50%; top:6%; transform:translateX(-50%); z-index:4; pointer-events:none; display:flex; align-items:center; justify-content:center; }
  .moon{
    width:420px; height:420px; border-radius:50%;
    background-image: url('https://images.unsplash.com/photo-1542877362-5f5f0d2b69b8?auto=format&fit=crop&w=2000&q=90');
    background-size:cover; background-position:center;
    box-shadow: 0 20px 120px rgba(30,50,90,0.35), inset 0 -8px 40px rgba(255,255,255,0.03);
    filter: drop-shadow(0 28px 80px rgba(8,18,40,0.45));
    animation: floatSlow 8s ease-in-out infinite;
  }
  @keyframes floatSlow{ 0%{transform:translateY(0)}50%{transform:translateY(-14px)}100%{transform:translateY(0)} }

  .ambient-mist{ position:absolute; left:50%; top:26%; transform:translateX(-50%); width:720px; height:240px; border-radius:30px; background: radial-gradient(ellipse at center, rgba(20,30,50,0.12), transparent 40%); filter: blur(26px); z-index:2; pointer-events:none; }

  /* CTA */
  .cta{ position:absolute; bottom:18px; left:50%; transform:translateX(-50%); display:flex; gap:12px; align-items:center; cursor:pointer; z-index:14; transition:opacity .45s ease, transform .45s ease; }
  .cta.hidden{ opacity:0; transform:translateY(18px); pointer-events:none; }
  .dot{ width:14px; height:14px; border-radius:50%; background: radial-gradient(circle,#fff,#ffdce4); box-shadow:0 0 14px 6px rgba(255,170,200,0.09); animation:pulse 2600ms infinite; }
  @keyframes pulse{0%{transform:scale(1);opacity:1}60%{transform:scale(1.45);opacity:.45}100%{transform:scale(1);opacity:1} }

  /* Signature */
  .signature{ position:absolute; right:18px; bottom:12px; font-family:"Great Vibes",cursive; font-size:34px; z-index:16; text-align:right;
    background: linear-gradient(90deg,var(--gold-1) 0%, var(--gold-2) 60%, var(--gold-1) 100%);
    -webkit-background-clip: text; background-clip: text; color: transparent;
    text-shadow: 0 6px 22px rgba(0,0,0,0.45);
    opacity:0.98;
    pointer-events:auto;
  }

  /* Handwritten hint (right) */
  .hint{
    position:absolute; right:22px; bottom:58px; font-family:"Great Vibes",cursive; font-size:18px; color: rgba(245,240,230,0.92); text-align:right;
    opacity:0; transform:translateY(9px); transition:all .9s ease; z-index:15; max-width:220px; line-height:1.05;
    text-shadow: 0 6px 18px rgba(0,0,0,0.36);
  }
  .hint.show{ opacity:0.95; transform:translateY(0); }

  /* particles */
  canvas.particles{ position:absolute; inset:0; z-index:0; pointer-events:none; filter: blur(.9px) saturate(120%); mix-blend-mode:screen; }

  /* ripple */
  .ripple{ position:absolute; border-radius:50%; transform:translate(-50%,-50%) scale(.6); background: radial-gradient(circle, rgba(255,255,255,0.12), transparent 40%); pointer-events:none; width:120px; height:120px; opacity:0; z-index:20; transition:opacity .45s ease, transform .55s ease; }

  /* responsive */
  @media (max-width:520px){
    .moon{ width:260px; height:260px; }
    .moon-halo{ width:520px; height:520px; top:2%; }
    .signature{ font-size:20px; right:12px; bottom:8px; }
    .hint{ font-size:14px; right:12px; bottom:44px; max-width:160px; }
    .ripple{ width:84px; height:84px; }
  }
</style>
</head>
<body>
  <div class="frame" id="frame" role="application" aria-label="Rose to Moon animation">

    <canvas id="particles" class="particles" aria-hidden="true"></canvas>

    <!-- SCREEN 1: Intro (FINAL TEXT) -->
    <section id="screen-1" class="screen active" aria-label="intro">
      <div class="panel">
        <div class="title">This rose is a small gesture of respect.<br><strong style="display:block;margin-top:10px">For you, Gunja.</strong></div>
        <div class="subtitle" style="margin-top:14px; opacity:0.95">Nothing more… nothing less.</div>
      </div>
    </section>

    <!-- SCREEN 2: Moon reveal -->
    <section id="screen-2" class="screen" aria-label="moon">
      <div class="moon-halo" aria-hidden="true"></div>
      <div class="moon-wrap" aria-hidden="true"><div class="moon" aria-hidden="true"></div></div>
      <div class="ambient-mist" aria-hidden="true"></div>

      <div class="panel">
        <div class="title" id="line-main">Some things are meant to be found…<br><strong style="display:block;margin-top:8px">not given.</strong></div>
        <div class="subtitle" id="sub-main" style="opacity:0">Tap to continue — or keep reading if you like quiet things.</div>
      </div>
    </section>

    <!-- SCREEN 3: Deeper message -->
    <section id="screen-3" class="screen" aria-label="message">
      <div class="panel">
        <div class="title" id="line-2">If you’re reading this, <strong>Gunja</strong>…<br><strong style="display:block;margin-top:8px">maybe the universe wanted our paths to cross.</strong></div>
      </div>
    </section>

    <!-- SCREEN 4: Final -->
    <section id="screen-4" class="screen" aria-label="final">
      <div class="panel">
        <div class="title" id="final-main">Not a confession.<br><strong style="display:block;margin-top:8px">Not a question.<br>Just a truth you deserved to know.</strong></div>
      </div>
    </section>

    <div class="signature" id="signature">— Sujoy</div>
    <div class="hint" id="hint">“If you ever feel like letting a little more light in…<br>I’ll be around.”</div>

    <div class="cta" id="cta" role="button" tabindex="0" aria-label="tap to continue">
      <div class="dot" aria-hidden="true"></div>
      <div style="color:var(--muted); font-size:14px">tap to continue</div>
    </div>

    <div class="ripple" id="ripple" aria-hidden="true"></div>
  </div>

  <!-- soft piano (copyright-free) -->
  <audio id="bg-audio" src="https://files.catbox.moe/7bzf1v.mp3" preload="auto" loop></audio>

<script>
/* ---------- Particles (soft & optimized) ---------- */
(function(){
  const canvas = document.getElementById('particles');
  const ctx = canvas.getContext('2d');
  let w,h,particles=[];
  function resize(){ w = canvas.width = canvas.clientWidth; h = canvas.height = canvas.clientHeight; }
  window.addEventListener('resize', resize);
  resize();
  function rand(a,b){ return Math.random()*(b-a)+a; }
  function make(){ return { x:rand(0,w), y:rand(0,h), r:rand(0.6,3.2), vx:rand(-0.02,0.02), vy:rand(0.004,0.06), a:rand(0.02,0.6) }; }
  for(let i=0;i<72;i++) particles.push(make());
  function draw(){
    ctx.clearRect(0,0,w,h);
    for(const p of particles){
      p.x += p.vx; p.y -= p.vy;
      if(p.x < -10) p.x = w+10;
      if(p.x > w+10) p.x = -10;
      if(p.y < -10) p.y = h+10;
      if(p.y > h+10) p.y = -10;
      const g = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*5.2);
      g.addColorStop(0, `rgba(235,245,255,${Math.min(0.95,p.a)})`);
      g.addColorStop(1, `rgba(170,200,255,${Math.max(0.02,p.a*0.05)})`);
      ctx.fillStyle = g;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ---------- Flow + robust event handling + audio fade ---------- */
(function(){
  const screens = [
    document.getElementById('screen-1'),
    document.getElementById('screen-2'),
    document.getElementById('screen-3'),
    document.getElementById('screen-4'),
  ];
  const frame = document.getElementById('frame');
  const cta = document.getElementById('cta');
  const audio = document.getElementById('bg-audio');
  const hint = document.getElementById('hint');
  const sig = document.getElementById('signature');
  const ripple = document.getElementById('ripple');
  let idx = 0;
  let audioStarted = false;
  let lastTap = 0;

  function show(i){
    screens.forEach((s,j)=> s.classList.toggle('active', i===j));
    if(i === 1){
      setTimeout(()=> document.getElementById('sub-main').style.opacity = '1', 420);
    } else {
      document.getElementById('sub-main').style.opacity = '0';
    }
    if(i === screens.length - 1){
      setTimeout(()=> hint.classList.add('show'), 450);
      cta.classList.add('hidden');
    } else {
      hint.classList.remove('show');
      cta.classList.remove('hidden');
    }
  }

  function fadeInAudio(target=0.45, dur=3000){
    if(!audio) return;
    audio.volume = 0;
    const start = Date.now();
    audio.play().catch(()=>{/* will attempt again on gesture */});
    function step(){
      const t = Math.min(1, (Date.now() - start)/dur);
      audio.volume = t * target;
      if(t < 1) requestAnimationFrame(step);
    }
    step();
  }

  function startAudioOnce(){
    if(audioStarted) return;
    audioStarted = true;
    fadeInAudio();
  }

  function next(){
    if(idx < screens.length - 1){
      idx++;
      show(idx);
    } else {
      const el = screens[idx];
      el.animate([{transform:'scale(1)'},{transform:'scale(1.01)'},{transform:'scale(1)'}], {duration:420, easing:'ease-out'});
    }
  }

  function showRipple(x,y){
    ripple.style.left = x + 'px';
    ripple.style.top = y + 'px';
    ripple.style.opacity = 0.98;
    ripple.style.transform = 'translate(-50%,-50%) scale(0.6)';
    setTimeout(()=>{ ripple.style.transform = 'translate(-50%,-50%) scale(1)'; ripple.style.opacity = 0; }, 10);
  }

  function handleTap(ev){
    const now = Date.now();
    if(now - lastTap < 200) return;
    lastTap = now;

    let x = window.innerWidth/2, y = window.innerHeight - 80;
    if(ev.touches && ev.touches[0]){ x = ev.touches[0].clientX; y = ev.touches[0].clientY; }
    else if(ev.clientX && ev.clientY){ x = ev.clientX; y = ev.clientY; }

    // ignore signature taps (so user can admire)
    const rect = sig.getBoundingClientRect();
    if(x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom){
      showRipple(x,y);
      return;
    }

    showRipple(x,y);
    startAudioOnce();
    next();
  }

  // robust listeners: pointerup, touchend, click fallback
  frame.addEventListener('pointerup', function(e){ if(e.cancelable) e.preventDefault(); handleTap(e); }, {passive:false});
  frame.addEventListener('touchend', function(e){ if(e.cancelable) e.preventDefault(); handleTap(e); }, {passive:false});
  frame.addEventListener('click', function(e){ handleTap(e); });

  // keyboard support on CTA
  cta.addEventListener('keydown', function(ev){ if(ev.key === 'Enter' || ev.key === ' '){ ev.preventDefault(); startAudioOnce(); next(); } });

  // initial
  show(0);
})();
</script>
</body>
</html>